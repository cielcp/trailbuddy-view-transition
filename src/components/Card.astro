---
import Avatar from '@components/Avatar.astro'
import { Image } from 'astro:assets'

const { colors, user, postDate, title, subtitle, video, slug } = Astro.props
---

<a
  href={slug}
  class:list={[
    'relative flex flex-col rounded-3xl transition-transform',
    colors.text,
  ]}
  transition:name={`card ${slug} core`}
  transition:animate="initial"
>
  <article class="relative">
    <!-- card background -->
    <div
      class:list={['absolute inset-0 -z-10 rounded-3xl', colors.background]}
      transition:name={`card ${slug} background`}
      transition:animate="initial"
    >
    </div>

    <header class="relative z-10 flex flex-col gap-6 p-6 pb-0">
      <div class="flex items-center justify-between gap-4">
        <Avatar user={user} postDate={postDate} slug={slug} />
        <button
          class="flex h-7 w-7 items-center justify-center rounded-full bg-white text-black"
          transition:name={`card ${slug} add`}
          transition:animate="initial"
        >
          <svg
            class="h-5 w-5"
            viewBox="0 0 15 15"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M8 2.75C8 2.47386 7.77614 2.25 7.5 2.25C7.22386 2.25 7 2.47386 7 2.75V7H2.75C2.47386 7 2.25 7.22386 2.25 7.5C2.25 7.77614 2.47386 8 2.75 8H7V12.25C7 12.5261 7.22386 12.75 7.5 12.75C7.77614 12.75 8 12.5261 8 12.25V8H12.25C12.5261 8 12.75 7.77614 12.75 7.5C12.75 7.22386 12.5261 7 12.25 7H8V2.75Z"
              fill="currentColor"
              fill-rule="evenodd"
              clip-rule="evenodd"></path>
          </svg>
        </button>
      </div>
      <div
        class="flex flex-col text-center"
        transition:name={`card ${slug} heading`}
        transition:animate="initial"
      >
        <h1
          class="text-balance font-sans text-3xl font-semibold uppercase leading-none"
        >
          {title}
        </h1>
        <h2 class="text-balance font-sans text-lg">
          {subtitle}
        </h2>
      </div>
    </header>
    <div
      class="w-full overflow-hidden rounded-b-3xl"
      transition:name={`card ${slug} media box`}
      transition:animate="initial"
    >
      <!-- <video poster={`${video}-poster.jpg`} autoplay loop muted playsinline>
            <source src={`${video}.webm`} type="video/webm" />
            <source src={`${video}.mp4`} type="video/mp4" />
          </video> -->
      <Image
        src={`${video}-poster.png`}
        alt=""
        class="-my-px"
        width={1745}
        height={1600}
        transition:persist={`card ${slug} media`}
      />
    </div>
  </article>
</a>
